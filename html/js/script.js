function setCookie(e,t,n){n=n||{};var i=n.expires;if("number"==typeof i&&i){var a=new Date;a.setTime(a.getTime()+1e3*i),i=n.expires=a}i&&i.toUTCString&&(n.expires=i.toUTCString()),t=encodeURIComponent(t);var o=e+"="+t;for(var s in n){o+="; "+s;var l=n[s];l!==!0&&(o+="="+l)}document.cookie=o}function getCookie(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}!function(){for(var e,t=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],i=n.length,a=window.console=window.console||{};i--;)e=n[i],a[e]||(a[e]=t)}(),"undefined"==typeof jQuery?console.warn("jQuery hasn't loaded"):console.log("jQuery has loaded"),$(function(){function e(e){$items=v.filter(function(){var e=$(this),t=e.data("price");return!(t<b)&&!(x&&t>x)}),"all"==S&&(S=$items.length),S=parseInt(S,10);var t=(g-1)*S,n=t+S,i=$items.length,a=Math.ceil(i/S),o="";if(a>1){g>1&&(o+='<li class="prev"><span data-page="'+(g-1)+'">предыдущая</span></li>');for(var s=1;s<=a;s++)o+="<li"+(s==g?' class="active"':"")+'><span data-page="'+s+'">'+s+"</span></li>";g<a&&(o+='<li class="next"><span data-page="'+(g+1)+'">следующая</span></li>')}f.html(o),e?(v.parent().fadeOut("fast"),$items.slice(t,n).parent().fadeIn("fast"),$("html, body").animate({scrollTop:T.offset().top},"fast")):(v.parent().hide(),$items.slice(t,n).parent().show())}function t(e,t){v.parent().sort(function(n,i){var a=parseFloat($(n).children().data(e)),o=parseFloat($(i).children().data(e));return a>o?"desc"==t?-1:1:a<o?"desc"==t?1:-1:0}).detach().appendTo(h),v=$(".item",h),setCookie("sort",e,{path:"/",expires:2592e3}),setCookie("dir",t,{path:"/",expires:2592e3})}function n(){return JSON.parse(getCookie("cart")||null)}function i(e){setCookie("cart",JSON.stringify(e),{path:"/",expires:2592e3})}function a(e,t,a,o,l,r){var c=n()||{};"undefined"==typeof o&&(o=1),"undefined"==typeof l&&(l=""),"undefined"==typeof r&&(r=""),c.hasOwnProperty(e)?(c[e][2]=o,c[e][3]=l,c[e][4]=r):c[e]=[t,a,o,l,r],i(c),s()}function o(e){var t=n()||{};t.hasOwnProperty(e)&&delete t[e],i(t),s()}function s(){var e=n(),t=0,i=0,a=$(".header-cart");if(null!==e)for(var o in e){var s=parseFloat(e[o][2]);i+=parseFloat(e[o][1])*s,t+=s}t>0?(a.removeClass("empty"),$(".sum span",a).text(i.toLocaleString()+" руб."),$(".num span",a).text(t)):(a.addClass("empty"),$(".sum span",a).text("0 руб."),$(".num span",a).text("0"));$(".main .cart")}var l=$("body");if($("input").is("#from"))var r=parseInt($("input[name=min-price]").val().replace(" ","")),c=parseInt($("input[name=max-price]").val().replace(" ","")),d=parseInt($("input[name=minimum]").val().replace(" ","")),p=parseInt($("input[name=maximum]").val().replace(" ",""));if($("#slider-range").slider({range:!0,min:d,max:p,values:[r,c],slide:function(e,t){$("input[name=min-price]").val(t.values[0]),$("input[name=max-price]").val(t.values[1])}}),$("input[name=min-price]").on("change",function(){$("#slider-range").slider("values",[parseInt($("input[name=min-price]").val()),parseInt($("input[name=max-price]").val())])}),$("input[name=max-price]").on("change",function(){$("#slider-range").slider("values",[parseInt($("input[name=min-price]").val()),parseInt($("input[name=max-price]").val())])}),$("span").is("#anchor4filter")){$("html,body").animate({scrollTop:$("#products").offset().top},500);var u=$("#filter").find(".dropdown-menu");u.each(function(){if($toggle=$(this).parent().find(".dropdown-toggle"),$item=$(this).find("li > input:checked"),text=[],$item.each(function(){text.push($(this).parent().find("label").html())}),text.length){text=text.length<2?text.join(", "):text.length+" выбрано";var e=$toggle.find(".caret");$toggle.html(text||"&nbsp;"),e.length&&$toggle.append(" ")&&e.appendTo($toggle)}})}$(".navbar-toggle").click(function(){$(this).toggleClass("active")});var m=$(".scroll-top");m.length&&(m.click(function(e){e.preventDefault(),$("html, body").animate({scrollTop:"0px"},"slow")}),$(window).scroll(function(){$(window).scrollTop()>$(window).height()?m.removeClass("hidden"):m.addClass("hidden")}).scroll(),$(".modal").on("show.bs.modal",function(){if(window.innerWidth>document.documentElement.clientWidth){var e=window.innerWidth-document.documentElement.clientWidth;m.css("margin-right",e+"px")}}).on("hidden.bs.modal",function(){m.css("margin-right","0px")})),$('input[name="phone"], input[name="phone2"]').inputmask("+7(999)999-99-99"),l.on("submit",".ajax-form",function(e){e.preventDefault();var t=$(this),n=$(".btn",t);n.button("loading"),$(".help-block",t).text(""),$.ajax({url:t.attr("action"),type:t.attr("method"),data:t.serialize(),success:function(e){var n=$("#"+t.attr("id"),e);n.hasClass("success")?(t.trigger("reset"),$(".modal.in").length?$(".modal.in").modal("hide").one("hidden.bs.modal",function(){$("#success").modal("show")}):$("#success").modal("show")):(t.replaceWith(n),$('input[name="phone"]',n).inputmask("+7(999)999-99-99"))},complete:function(){n.button("reset")}})}),$(".print-btn").click(function(){window.print()}),$(".fancybox").fancybox({openEffect:"elastic",closeEffect:"elastic"}),$(".s-5 .more-btn").click(function(){var e=$(this);e.prev().children(":hidden").slideDown(),e.remove()}),$(".s-8 .name").click(function(){$(this).closest("li").addClass("active").one("blur",function(){$(this).removeClass("active")})}),$(".product-slider").each(function(){var e=$(this),t=4;e.closest(".main").length&&(t=3),e.slick({slidesToShow:t,slidesToScroll:t,responsive:[{breakpoint:1200,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:992,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1}}]})}),$(".discounts-slider").slick({dots:!0,responsive:[{breakpoint:460,settings:{arrows:!1}}]}),$(".photo-slider").each(function(){var e=$(this),t=4;e.closest(".main").length&&(t=3),e.on("init breakpoint",function(){$(".slick-cloned .blueimp",e).removeAttr("data-gallery")}),e.slick({slidesToShow:t,slidesToScroll:t,responsive:[{breakpoint:1200,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:992,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1}}]})}),$("#blueimp-gallery").on("open",function(e){if(window.innerWidth>document.documentElement.clientWidth){var t=window.innerWidth-document.documentElement.clientWidth;$("body").addClass("scroll-hidden").css("padding-right",t+"px"),m.css("margin-right",t+"px")}$("#blueimp-gallery").toggleClass("blueimp-gallery-controls",!0)}).on("closed",function(e){$("body").removeClass("scroll-hidden").css("padding-right","0px"),m.css("margin-right","0px")}),l.on("click",".extra-nav .title",function(){$(this).next().stop().slideToggle()}).on("click",".sidebar-nav span",function(){$(this).next().stop().slideToggle()}),$(".sidebar-nav").each(function(){var e=$(this);$(".active",e).length||$("li:first",e).addClass("open")});var h=$("#products");if(h.length){var v=$(".item",h),f=$("#pagination"),g=1,b=null,x=null;if(v.each(function(){var e=$(this).data("price");(null===b||e<b)&&(b=e),(null===x||e>x)&&(x=e)}),null!==b&&null!==x){var k=$(".catalog-filter"),w=$(".price-slider",k),y=$('[name="price_min"]',k),C=$('[name="price_max"]',k);y.val(b.toLocaleString()),C.val(x.toLocaleString()),w.slider({range:!0,min:b,max:x,values:[b,x],slide:function(e,t){b=t.values[0],x=t.values[1],y.val(b.toLocaleString()),C.val(x.toLocaleString())}}),y.change(function(){var e=parseInt(this.value.replace(" ",""),10),t=w.slider("values",1);(isNaN(e)||e<b)&&(e=b),e>t&&(e=t),b=e,y.val(e.toLocaleString()),w.slider("values",0,e)}),C.change(function(){var e=parseInt(this.value.replace(" ",""),10),t=w.slider("values",0);(isNaN(e)||e>x)&&(e=x),e<t&&(e=t),x=e,C.val(e.toLocaleString()),w.slider("values",1,e)}),$(".btn",k).click(function(){g=1,e(!0)}),k.show()}var T=$(".catalog-controls"),S=$(".select-number",T).val();T.on("click",".sort-btn",function(){var n=$(this),i=n.data("sort"),a=n.data("dir");n.addClass("active").siblings(".sort-btn").removeClass("active"),$.when(t(i,a)).then(function(){g=1,e()})}).on("change",".select-number",function(){S=this.value,g=1,e(),setCookie("number",S,{path:"/",expires:2592e3})}).on("click",".display-btn",function(){var e=$(this),t=e.data("type");e.addClass("active").siblings().removeClass("active"),h.fadeOut("fast",function(){h.removeClass("grid list").addClass(t).fadeIn("fast")}),setCookie("display",t,{path:"/",expires:2592e3})}),f.on("click","span",function(){var t=$(this);t.addClass("active").siblings().removeClass("active"),g=t.data("page"),e(!0)});var I=$(".sort-btn.active",T).data("sort"),_=$(".sort-btn.active",T).data("dir");"price"!=I||"desc"==_?t(I,_):e()}$(".rating span").click(function(){var e=$(this),t=e.parent(),n=e.index()+1,i=t.closest(".item").data("id");t.hasClass("enabled")&&(t.removeClass("enabled"),$.ajax({url:document.location.href,type:"post",data:"id="+i+"&rating="+n,success:function(e){var i=t.data("value"),a=t.data("num"),o=(i*a+n)/(a+1);o=.5*Math.ceil(o/.5),t.attr("data-rating",o),t.tooltip({trigger:"manual",placement:t.parent().width()>300?"right":"bottom",title:"Спасибо. Ваш голос учтен"}).tooltip("show").one("shown.bs.tooltip",function(){setTimeout(function(){t.tooltip("destroy")},2e3)})}}))}),$(".buy-btn").click(function(e){e.preventDefault();var t=$(this).closest(".item"),n=$(".buy-form",t),i=t.data("id"),o=t.data("title"),s=t.data("price"),l=$("[name=num]",t).length?$("[name=num]",t).val():1,r=$("[name=side]:checked",t).length?$("[name=side]:checked",t).val():"",c=$("[name=size]",t).length?$("[name=size]",t).val():"";a(i,o,s,l,r,c),n.addClass("in-cart")}),$(".buy-form .remove").click(function(e){e.preventDefault();var t=$(this).closest(".item").data("id");o(t),$(this).closest(".buy-form").removeClass("in-cart")}),$(".cart .remove").click(function(){var e=$(this).closest(".item"),t=e.data("id");o(t),e.remove(),s()}),$(".num .minus").click(function(){var e=$(this).next(),t=e.val();t--,e.val(t).change()}),$(".num .plus").click(function(){var e=$(this).prev(),t=e.val();t++,e.val(t).change()}),$(".num input").change(function(){var e=$(this),t=parseInt(this.value,10);(isNaN(t)||t<1)&&(t=1,e.val(t)),t>99&&(t=99,e.val(t)),s()}).click(function(){$(this).select()}),s(),$("button").is(".sort-btn")&&$(".sort-btn")[0].click(),$(window).width()<=460&&$.ajax({url:"/katalog-metallicheskih-dverey",success:function(e){$mobile_catalog_nav=$(".sidebar-nav",e),$("ul",$mobile_catalog_nav).hide(),$(".title",$mobile_catalog_nav).click(function(e){e.preventDefault(),$mobile_catalog_nav.children("ul").slideToggle()}),$("#primary-nav").after($mobile_catalog_nav)}})});
//# sourceMappingURL=maps/script.js.map
